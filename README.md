# MUSE-KEYPAD21

一个基于GMK固件的21按键/2旋转编码器/1钮子开关的RGB数字小键盘

## 键盘详情

### 设计情况
此键盘的定位为常规87配列的扩充键盘，因此在设计上极大地保留了数字键盘按键区域，同时在数字区域上方添加了4个常用快捷按键，以及增加了两个旋转编码器和1个钮子开关用于调节音量/静音/屏幕亮度/切换歌曲/暂停播放音乐等功能。

在设计之初，为了方便调试（主要是担心会失败），将整个键盘分了两块PCB板子打印，一块为Atmega32U4的最小系统板，将所有IO端口引出，同时设置了Type-C接口；另一块为键盘按键主体部分，用于焊接RGB灯珠、热插拔、编码器灯，两块板子用排针排母连接。

### 芯片选择
芯片选择了QMK固件中最常用的Atmega32U4

## 键位详情

### 21按键
1. 保留keypad常规数字区的按键（0-9、 +-*/.、 回车），将Num Lock按键替换为图层切换按键
2. 增加了4个常用按键（剪切、复制、粘贴、撤销）

### 2旋转编码器
1. 选择EC11旋转编码器，支持按下
2. 两个旋转编码器在不同图层中有不同的表现

### 1钮子开关
设置钮子开关的原因是，我希望能增加一个物理的切歌开关，因此选择了自恢复三角钮子开关MTS123

### 图层
本键盘共三个图层，分别为：
    · 基础数字键图层，即原本keypad数字键盘按键+音量调节编码器1（按键静音）+屏幕亮度调节编码器2（按键暂停歌曲）+上一曲/下一曲钮子开关
    · 游戏图层，将原本的7894561230.+ Enter 分别替换为qweasdzxc Ctrl Alt r Space，编码器1改为RGB灯光亮度调节（按键关闭灯光），编码器2改为鼠标滚轮（按键静音）
    · RGB光效图层，将原数字区（0-9）改为10个RGB特效选择，Enter改为全部灯光效果循环切换，+与-为RGB饱和度修改，编码器1为RGB色相修改，编码器2为RGB亮度修改（按键关闭RGB背光）

## 文件介绍

### 3D Models
SolidWorks模型文件，是键盘的顶盖、定位板和底盖的模型文件（暂时有问题）

### Firmware
基于QMK框架的固件文件，文件夹内含有HEX固件，可以利用QMK Toolbox直接刷写（请勿直接刷写via固件）；

代码部分的使用方法：

1. 克隆qmk仓库至本地
2. 将文件夹`kb`放入`qmk-firmware\keyboards`
3. 根据QMK文档生成和刷写qmk固件

注意：via版本固件没有写好，因此暂时不支持via，请勿使用via版本hex固件刷写键盘

### Hardware
PCB的制作利用了嘉立创EDA Pro版本制作（可以白嫖Atmega32U4板），可以直接导入嘉立创EDA Pro版；同时提供了两块板子的Gerber文件，可以直接拿去PCB打印
